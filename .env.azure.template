# ============================================================================
# Azure Environment Variables Template
# Proyecto: Asistente Plantitas - Demo Académica
# ============================================================================
#
# Instrucciones:
# 1. Copia este archivo como .env.azure
# 2. Reemplaza todos los valores <placeholder> con tus valores reales
# 3. NUNCA commits este archivo con valores reales a Git
#
# ============================================================================

# ============================================================================
# DATABASE - PostgreSQL Flexible Server
# ============================================================================

# Connection string completo de PostgreSQL
# Formato: postgresql://USER:PASSWORD@HOST:5432/DATABASE?sslmode=require
DATABASE_URL=postgresql://<plantitas_admin>:<PASSWORD>@<plantitas-demo-db>.postgres.database.azure.com:5432/plantitas_db?sslmode=require

# Configuración adicional de DB
DB_CONNECTION_TIMEOUT=60
DB_POOL_PRE_PING=true

# ============================================================================
# AZURE BLOB STORAGE
# ============================================================================

# Connection string de Azure Storage (obtener del Portal Azure)
# Formato: DefaultEndpointsProtocol=https;AccountName=...;AccountKey=...;EndpointSuffix=core.windows.net
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=<STORAGE_ACCOUNT_NAME>;AccountKey=<STORAGE_ACCOUNT_KEY>;EndpointSuffix=core.windows.net

# Nombre del contenedor de blobs (ya debe estar creado)
AZURE_STORAGE_CONTAINER_NAME=plantitas-imagenes

# NO usar emulador en producción
AZURE_STORAGE_USE_EMULATOR=false

# Opcional: Nombre y key por separado (si no usas connection string)
# AZURE_STORAGE_ACCOUNT_NAME=<plantitasdemostorage123>
# AZURE_STORAGE_ACCOUNT_KEY=<account-key>

# ============================================================================
# JWT AUTHENTICATION
# ============================================================================

# Secret key para firmar tokens JWT (generar uno único de 64 caracteres)
# Generar con: python -c "import secrets; print(secrets.token_urlsafe(48))"
JWT_SECRET_KEY=<generar-64-caracteres-aleatorios>

# Algoritmo de encriptación
JWT_ALGORITHM=HS256

# Tiempo de expiración del access token (en minutos)
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Tiempo de expiración del refresh token (en días)
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Entorno de la aplicación
ENVIRONMENT=production

# Debug mode (SIEMPRE false en producción)
DEBUG=false

# Nivel de logging
LOG_LEVEL=INFO

# Formato de logs
LOG_FORMAT=json

# Tamaño máximo de archivos (MB)
MAX_TAMANO_ARCHIVO_MB=10

# ============================================================================
# CORS CONFIGURATION
# ============================================================================

# Origins permitidos para CORS (URL del frontend)
# Separar múltiples origins con comas
CORS_ORIGINS=https://<plantitas-frontend>.victoriousstone-<id>.<region>.azurecontainerapps.io

# ============================================================================
# GEMINI API - Identificación de Plantas
# ============================================================================

# API Key de Google Gemini (obtener en: https://aistudio.google.com/app/apikey)
GEMINI_API_KEY=<tu-gemini-api-key>

# Modelo a usar
GEMINI_MODEL=gemini-2.0-flash-exp

# Límites de requests
GEMINI_MAX_REQUESTS_PER_DAY=1500
GEMINI_MAX_REQUESTS_PER_USER_PER_DAY=50

# Parámetros del modelo
GEMINI_TEMPERATURE=0.7
GEMINI_MAX_OUTPUT_TOKENS=8192
GEMINI_TIMEOUT_SECONDS=30

# ============================================================================
# REDIS (Opcional - para cache)
# ============================================================================

# Si deployaste Redis en Azure
# REDIS_URL=redis://<user>:<password>@<host>:6379/0

# ============================================================================
# FRONTEND VARIABLES (para Next.js)
# ============================================================================

# URL del backend API
NEXT_PUBLIC_API_URL=https://<plantitas-backend>.victoriousstone-<id>.<region>.azurecontainerapps.io

# Entorno
NODE_ENV=production

# Puerto (Azure Container Apps usa PORT dinámico)
PORT=3000

# ============================================================================
# MONITORING & OBSERVABILITY (Opcional)
# ============================================================================

# Application Insights (si lo configuraste)
# APPLICATIONINSIGHTS_CONNECTION_STRING=<connection-string>

# ============================================================================
# EJEMPLO DE VALORES REALES (NO USAR, SOLO REFERENCIA)
# ============================================================================
#
# DATABASE_URL=postgresql://plantitas_admin:MySecurePass123!@plantitas-demo-db.postgres.database.azure.com:5432/plantitas_db?sslmode=require
#
# AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=plantitasdemostorage456;AccountKey=abc123xyz...;EndpointSuffix=core.windows.net
#
# JWT_SECRET_KEY=kJ8n2Hx9pLm4vB7qR5tYu1wE3zD6aC0fG9jK8nM2pL5rT7yU1xW3zA6cF9hJ2mN5qR8tY
#
# GEMINI_API_KEY=AIzaSyABC123XYZ789_example_key_DO_NOT_USE
#
# CORS_ORIGINS=https://plantitas-frontend.victoriousstone-12345.eastus.azurecontainerapps.io
#
# NEXT_PUBLIC_API_URL=https://plantitas-backend.victoriousstone-12345.eastus.azurecontainerapps.io
#
# ============================================================================

# ============================================================================
# COMANDOS ÚTILES
# ============================================================================
#
# Obtener connection string de PostgreSQL:
# az postgres flexible-server show-connection-string --server-name plantitas-demo-db
#
# Obtener connection string de Storage:
# az storage account show-connection-string --name plantitasdemostorage123 --resource-group rg-plantitas-demo-temp --query connectionString --output tsv
#
# Generar JWT Secret:
# python -c "import secrets; print(secrets.token_urlsafe(48))"
#
# Obtener URL del backend:
# az containerapp show --name plantitas-backend --resource-group rg-plantitas-demo-temp --query properties.configuration.ingress.fqdn --output tsv
#
# Obtener URL del frontend:
# az containerapp show --name plantitas-frontend --resource-group rg-plantitas-demo-temp --query properties.configuration.ingress.fqdn --output tsv
#
# ============================================================================
