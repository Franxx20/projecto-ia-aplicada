# ===============================================
# CONFIGURACIÓN UNIFICADA DEL PROYECTO
# ===============================================
# Este es el ÚNICO archivo .env necesario para todo el proyecto.
# Copia este archivo como .env y ajusta los valores según tu entorno.
#
# IMPORTANTE: Este archivo unifica toda la configuración de backend, frontend,
# base de datos, Azure Storage y servicios externos en un solo lugar.

# ===============================================
# INFORMACIÓN GENERAL DEL PROYECTO
# ===============================================
PROJECT_NAME=projecto-ia
NOMBRE_APP=Asistente Plantitas - Backend API
VERSION=0.1.0
DESCRIPCION=API REST para el Asistente de Jardinería y Cuidado de Plantas

# Entorno de ejecución (development, staging, production)
ENVIRONMENT=development
ENTORNO=desarrollo

# Modo debug (true/false)
DEBUG=true

# ===============================================
# CONFIGURACIÓN DE BASE DE DATOS POSTGRESQL
# ===============================================
# Configuración para PostgreSQL (desarrollo y producción)
POSTGRES_DB=proyecto_ia_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres123_CHANGE_IN_PRODUCTION
POSTGRES_PORT=5432

# Rutas de volúmenes para PostgreSQL
POSTGRES_DATA_PATH=./data/postgres
DB_BACKUP_PATH=./backups

# URL de conexión (para backend FastAPI)
# Desarrollo: SQLite
DATABASE_URL=sqlite:///./plantitas_dev.db
# Producción: PostgreSQL (descomentar y configurar)
# DATABASE_URL=postgresql://postgres:postgres123_CHANGE_IN_PRODUCTION@db:5432/proyecto_ia_db

# Pool de conexiones (solo para PostgreSQL)
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_ECHO=false

# ===============================================
# CONFIGURACIÓN DEL BACKEND (FASTAPI)
# ===============================================
# Puerto del backend
BACKEND_PORT=8000
HOST=0.0.0.0
PUERTO=8000
WORKERS=1

# Rutas de volúmenes para backend
BACKEND_CODE_PATH=./backend
BACKEND_LOGS_PATH=./logs
UPLOAD_PATH=./uploads

# Directorio de uploads
DIRECTORIO_UPLOADS=./uploads
MAX_TAMANO_ARCHIVO_MB=10
FORMATOS_IMAGEN_PERMITIDOS=["jpg","jpeg","png","webp"]

# ===============================================
# SEGURIDAD Y AUTENTICACIÓN (JWT)
# ===============================================
# JWT Secret Key - CAMBIAR EN PRODUCCIÓN
# Generar con: openssl rand -hex 32
SECRET_KEY=your-super-secret-key-change-in-production-min-32-chars
JWT_SECRET_KEY=CHANGE_THIS_SECRET_KEY_IN_PRODUCTION_USE_ENV_FILE
JWT_ALGORITHM=HS256
ALGORITHM=HS256

# Tiempos de expiración
ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_EXPIRACION_MINUTOS=30
JWT_REFRESH_EXPIRACION_DIAS=7

# Password Hashing
BCRYPT_ROUNDS=12

# ===============================================
# CORS CONFIGURATION
# ===============================================
# Orígenes permitidos para CORS (separados por comas)
CORS_ORIGINS=http://localhost:4200,http://localhost:80,http://localhost:3000,http://127.0.0.1:4200,http://frontend:80,http://frontend:4200
ORIGENES_CORS=["http://localhost:4200","http://localhost:3000","http://127.0.0.1:4200","http://frontend:80"]
CORS_ALLOW_CREDENTIALS=true

# ===============================================
# CONFIGURACIÓN DEL FRONTEND (NEXT.JS)
# ===============================================
# Puerto del frontend
FRONTEND_PORT=4200

# URL del backend API (accesible desde el navegador del cliente)
API_URL=http://localhost:8000
NEXT_PUBLIC_API_URL=http://localhost:8000

# URL interna para llamadas server-side (dentro de Docker)
INTERNAL_API_URL=http://backend:8000

# Rutas de volúmenes para frontend
FRONTEND_CODE_PATH=./frontend
FRONTEND_DIST_PATH=./frontend/dist

# Variables públicas del frontend (prefijo NEXT_PUBLIC_)
# NEXT_PUBLIC_SITE_NAME=Proyecto IA Aplicada
# NEXT_PUBLIC_SITE_URL=http://localhost:4200

# ===============================================
# AZURE BLOB STORAGE
# ===============================================
# IMPORTANTE: Configura las credenciales de tu cuenta de Azure Storage
# 
# Opción 1: Usar Connection String (RECOMENDADO - más fácil)
# Ve a Azure Portal → Storage Account → Access keys → Connection string
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=YOUR_ACCOUNT_NAME;AccountKey=YOUR_ACCOUNT_KEY;EndpointSuffix=core.windows.net

# Opción 2: Usar Account Name + Key por separado (Alternativa)
# Descomenta estas líneas si prefieres usar esta opción en lugar del Connection String
# AZURE_STORAGE_ACCOUNT_NAME=your-storage-account-name
# AZURE_STORAGE_ACCOUNT_KEY=your-storage-account-key

# Nombre del container donde se guardarán las imágenes
AZURE_STORAGE_CONTAINER_NAME=plantitas-imagenes

# Usar emulador de Azure (Azurite) para desarrollo local
# Cambia a 'true' si quieres usar Azurite en lugar de Azure real
AZURE_STORAGE_USE_EMULATOR=false

# Ruta para almacenar los datos de Azurite (emulador de Azure Storage)
AZURITE_DATA_PATH=./data/azurite

# ===============================================
# APIs EXTERNAS - IDENTIFICACIÓN DE PLANTAS
# ===============================================
# PlantNet API (Sprint 2)
# Documentación: https://my.plantnet.org/doc/getting-started/introduction
# Límite: 500 requests por día en plan gratuito
# Obtener API Key en: https://my.plantnet.org/
PLANTNET_API_KEY=
PLANTNET_API_URL=https://my-api.plantnet.org/v2/identify
PLANTNET_PROJECT=all
PLANTNET_MAX_REQUESTS_PER_DAY=500

# ===============================================
# APIs DE INTELIGENCIA ARTIFICIAL
# ===============================================
# Google Gemini API (para análisis de salud de plantas)
# Obtener API Key en: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=
GEMINI_MODEL=gemini-1.5-pro
GEMINI_MAX_TOKENS=2048
GEMINI_TEMPERATURE=0.7

# Azure OpenAI (Sprint 3 - Alternativa)
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_ENDPOINT=

# Claude API (Sprint 3 - Alternativa)
CLAUDE_API_KEY=

# ===============================================
# REDIS (CACHÉ - OPCIONAL)
# ===============================================
REDIS_PORT=6379
REDIS_PASSWORD=redis123_CHANGE_IN_PRODUCTION
REDIS_DATA_PATH=./data/redis

# ===============================================
# HERRAMIENTAS DE DESARROLLO
# ===============================================
# Puerto para Adminer (gestión de DB)
ADMINER_PORT=8080

# Hot reload para backend (true/false)
BACKEND_RELOAD=true

# ===============================================
# LOGGING
# ===============================================
# Nivel de logging (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO
NIVEL_LOG=INFO
LOG_FORMAT=json

# ===============================================
# RATE LIMITING Y PAGINACIÓN
# ===============================================
RATE_LIMIT_POR_MINUTO=60
PAGINACION_TAMANO_DEFECTO=20
PAGINACION_TAMANO_MAXIMO=100

# ===============================================
# CONFIGURACIÓN DE PRODUCCIÓN
# ===============================================
# Variables adicionales para entorno de producción

# SSL Configuration (para producción)
SSL_CERT_PATH=./certs/cert.pem
SSL_KEY_PATH=./certs/key.pem

# Email configuration (para notificaciones)
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password

# Monitoring
ENABLE_METRICS=false
METRICS_PORT=9090

# ===============================================
# NOTAS IMPORTANTES
# ===============================================
# 1. Este es el ÚNICO archivo .env necesario - está en la raíz del proyecto
# 2. Cambia TODAS las contraseñas y API keys en producción
# 3. Genera un SECRET_KEY único y seguro con: openssl rand -hex 32
# 4. Configura CORS_ORIGINS apropiadamente según tu dominio
# 5. Asegúrate de que las rutas de volúmenes existan
# 6. En producción, usa Docker Secrets o variables de entorno del sistema
# 7. Este archivo NO debe subirse a Git - está en .gitignore
# 8. Para obtener API keys:
#    - PlantNet: https://my.plantnet.org/
#    - Gemini: https://makersuite.google.com/app/apikey
#    - Azure Storage: https://portal.azure.com/